<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Metadatos básicos para configuración de la página -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agregar Ruta - Rutabus</title>

    <!-- Importación de hojas de estilo externas -->
    <!-- Bootstrap - Framework CSS para el diseño responsivo -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <!-- Leaflet - Biblioteca para mapas interactivos -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <!-- Leaflet Draw - Plugin para dibujar en el mapa -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-draw/dist/leaflet.draw.css" />
    <!-- Estilos personalizados de la aplicación -->
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="./img/logo.png" alt="Logo" width="80" height="60">
                Panel de Administrador
            </a>
            <a href="/index.html" class="auth-btn auth-btn-logout">Volver al Mapa</a>
        </div>
    </nav>

    <div class="admin-editor-layout">
        <aside class="editor-panel">
            <ul class="nav nav-tabs nav-fill" id="adminTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="crear-tab" data-bs-toggle="tab" data-bs-target="#crear-tab-pane" type="button" role="tab">Crear / Editar Ruta</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="gestionar-tab" data-bs-toggle="tab" data-bs-target="#gestionar-tab-pane" type="button" role="tab">Gestionar Rutas</button>
                </li>
            </ul>

            <div class="tab-content" id="adminTabContent">
                <div class="tab-pane fade show active" id="crear-tab-pane" role="tabpanel">
                    <form id="route-form" class="p-3">
                        <h4 id="form-title" class="mb-3">Crear Nueva Ruta</h4>
                        
                        <div class="row g-3 align-items-end mb-3">
                            <div class="col-sm-6">
                                <label for="routeName" class="form-label">Nombre de la Ruta:</label>
                                <input type="text" id="routeName" class="form-control" placeholder="Ej: Centro - USBI" required>
                            </div>
                            <div class="col-sm-3">
                                <label for="routeId" class="form-label">ID Ruta:</label>
                                <input type="text" id="routeId" class="form-control" placeholder="153" required pattern="\d{3}">
                            </div>
                            <div class="col-sm-3">
                                <label for="routeStop" class="form-label">ID Parada:</label>
                                <input type="text" id="routeStop" class="form-control" placeholder="153" required>
                            </div>
                        </div>
                        
                        <div class="row g-3 align-items-end mb-3">
                            <div class="col-sm-3">
                                <label for="horaInicio" class="form-label">Inicio:</label>
                                <input type="time" id="horaInicio" class="form-control" required>
                            </div>
                            <div class="col-sm-3">
                                <label for="horaFinal" class="form-label">Fin:</label>
                                <input type="time" id="horaFinal" class="form-control" required>
                            </div>
                            <div class="col-sm-3">
                                <label for="distanciaKm" class="form-label">Dist. (km):</label>
                                <input type="number" id="distanciaKm" class="form-control" placeholder="15.5" step="0.1" required>
                            </div>
                            <div class="col-sm-3">
                                <label for="duracionMin" class="form-label">Dur. (min):</label>
                                <input type="number" id="duracionMin" class="form-control" placeholder="45" required>
                            </div>
                        </div>

                        <div class="row g-3 align-items-center mb-3">
                             <div class="col-sm-12">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="mujerSegura">
                                    <label class="form-check-label" for="mujerSegura">Ruta Segura para Mujeres</label>
                                </div>
                            </div>
                        </div>

                        <p class="small text-muted mt-3">Usa las herramientas del mapa para dibujar la ruta (línea) y las paradas (puntos).</p>

                        <div class="mt-4">
                            <button type="submit" id="guardar-btn" class="btn btn-primary w-100">Guardar Ruta</button>
                            <button type="button" id="actualizar-btn" class="btn btn-warning w-100" style="display: none;">Actualizar Ruta</button>
                            <button type="button" id="cancelar-btn" class="btn btn-secondary w-100 mt-2" style="display: none;">Cancelar Edición</button>
                        </div>
                    </form>
                </div>

                <div class="tab-pane fade" id="gestionar-tab-pane" role="tabpanel">
                    <div id="lista-rutas-container" class="p-3">
                        </div>
                </div>
            </div>
            <div id="admin-message" class="m-3"></div>
        </aside>

        <main id="admin-map" class="admin-map-container"></main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-draw/dist/leaflet.draw.js"></script>
    <script src="./admin.js" defer></script>
</body>
</html>

